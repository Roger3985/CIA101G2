<%@ page contentType="text/html; charset=UTF-8" pageEncoding="Big5"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ page import="com.ren.administrator.service.AdministratorServiceImpl"%>
<%@ page import="com.ren.administrator.model.AdministratorVO" %>

<%
   AdministratorVO administratorVO = (AdministratorVO) request.getAttribute("administratorVO");
%>
--<%= administratorVO==null %>--${administratorVO.admPwd}-- <!-- line 100 -->

<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<title>管理員資料新增 - addAdministrator.jsp</title>

<style>
  table#table-1 {
	background-color: #CCCCFF;
    border: 2px solid black;
    text-align: center;
  }
  table#table-1 h4 {
    color: red;
    display: block;
    margin-bottom: 1px;
  }
  h4 {
    color: blue;
    display: inline;
  }
</style>

<style>
  table {
	width: 450px;
	background-color: white;
	margin-top: 1px;
	margin-bottom: 1px;
  }
  table, th, td {
    border: 0px solid #CCCCFF;
  }
  th, td {
    padding: 1px;
  }
</style>

</head>
<body bgcolor='white'>

<table id="table-1">
	<tr><td>
		 <h3>員工資料新增 - addAdministrator.jsp</h3></td><td>
		 <h4><a href="select_administrator.jsp">回首頁</a></h4>
	</td></tr>
</table>

<h3>資料新增:</h3>

<%-- 錯誤表列 --%>
<c:if test="${not empty errorMsgs}">
	<font style="color:red">請修正以下錯誤:</font>
	<ul>
		<c:forEach var="message" items="${errorMsgs}">
			<li style="color:red">${message}</li>
		</c:forEach>
	</ul>
</c:if>

<FORM METHOD="post" ACTION="administrator.do" name="form1">
<table>

	<tr>
		<td>密碼:</td>
		<td><input type="TEXT" name="admPwd" value="<%= (administratorVO==null)? "短短的襯衫" : administratorVO.getAdmName()%>" size="45"/></td>
	</tr>
	<tr>
		<td>名稱:</td>
		<td><input type="TEXT" name="admName" value="<%= (administratorVO==null)? "短襯衫" : administratorVO.getAdmPwd()%>" size="45"/></td>
	</tr>
	<tr>
		<td>狀態:</td>
		<td><input type="TEXT" name="admStat" value="<%= (administratorVO==null)? "1" : administratorVO.getAdmStat()%>" size="45"/></td>
	</tr>
	<tr>
		<td>信箱:</td>
		<td><input type="TEXT" name="admEmail" value="<%= (administratorVO==null)? "藍色" : administratorVO.getAdmEmail()%>" size="45"/></td>
	</tr>
	<tr>
		<td>職位:</td>
		<td><input type="TEXT" name="titleNo" value="<%= (administratorVO==null)? "5000" : administratorVO.getTitleNo()%>" size="45"/></td>
	</tr>
	<tr>
		<td>入職時間:</td>
		<td><input type="TEXT" name="admHireDate" value="<%= (administratorVO==null)? "1" : administratorVO.getAdmHireDate()%>" size="45"/></td>
	</tr>
	<tr>
		<td>大頭貼:</td>
		<td><input type="TEXT" name="admPhoto" value="<%= (administratorVO==null)? "200" : administratorVO.getAdmPhoto()%>" size="45"/></td>
	</tr>


	<jsp:useBean id="administratorSvc" scope="page" class="com.ren.administrator.service.AdministratorServiceImpl" />
	<tr>
		<td>商品類別編號:<font color=red><b>*</b></font></td>
		<td><select size="1" name="admPwd">
			<c:forEach var="administratorVO" items="${administratorSvc.all}">
				<option value="${administratorVO.admPwd}" ${(administratorVO.admPwd==administratorVO.admPwd)? 'selected':'' } >${administratorVO.admName}
			</c:forEach>
		</select></td>
	</tr>

</table>
<br>
<input type="hidden" name="action" value="insert">
<input type="submit" value="送出新增"></FORM>

<%--<div>--%>
<%--	<label>商品圖片：</label>--%>
<%--	<input type="file" id="p_file">--%>

<%--	<!-- 步驟四、使用 Drag and Drop 拖曳檔案 -->--%>
<%--	<div id="drop_zone"><span class="text">圖片拖曳至此處</span></div>--%>

<%--	<!-- 步驟五、透過 File 物件顯示預覽圖 -->--%>
<%--	<div id="preview"><span class="text">預覽圖</span></div>--%>
<%--</div>--%>

<%--<script>--%>

<%--	// 使用 Drag and Drop 拖曳檔案--%>
<%--	drop_zone_el.addEventListener("dragover", function (e) {--%>
<%--		e.preventDefault();--%>
<%--		// e.target.classList.add("-on");--%>
<%--	});--%>

<%--	drop_zone_el.addEventListener("dragenter", function (e) {--%>
<%--		e.target.classList.add("-on");--%>
<%--	});--%>

<%--	drop_zone_el.addEventListener("dragleave", function (e) {--%>
<%--		e.target.classList.remove("-on");--%>
<%--	});--%>

<%--	drop_zone_el.addEventListener("drop", function (e) {--%>
<%--		e.preventDefault();--%>
<%--		e.target.classList.remove("-on");--%>

<%--		// console.log(e.dataTransfer.files[0]);--%>

<%--		preview_img(e.dataTransfer.files[0]);--%>
<%--		p_file_el.value = ""; // 將 type="file"--%>
<%--	});--%>
<%--	// 透過 File 物件顯示預覽圖--%>
<%--	var preview_img = function (file) {--%>
<%--		// console.log(file);--%>

<%--		var reader = new FileReader();--%>
<%--		reader.readAsDataURL(file);--%>
<%--		reader.addEventListener("load", function () {--%>
<%--			// console.log(reader.result);--%>
<%--			// let img_str = `<img src="' + reader.result + '" class"">`;--%>
<%--			let img_str = `<img src="${reader.result}" class>`;--%>
<%--			preview_el.innerHTML = img_str;--%>
<%--		});--%>
<%--	};--%>
<%--	p_file_el.addEventListener("change", function (e) {--%>
<%--		//console.log(this.files);--%>

<%--		if (this.files.length > 0) {--%>
<%--			preview_img(this.files[0]);--%>
<%--		} else {--%>
<%--			preview_el.innerHTML = '<span class="text">預覽圖</span>'--%>
<%--		}--%>
<%--	});--%>
<%--	// 資料送出--%>
<%--	btn_submit_el.addEventListener("click", function(e){--%>
<%--		e.preventDefault();--%>

<%--		var send_data = {};--%>
<%--		send_data.p_name = p_name_el.value;--%>
<%--		send_data.p_count = p_count_el.value;--%>

<%--		var img_base64_el = document.querySelector(".preview_img");--%>
<%--		if(img_base64_el){--%>
<%--			send_data.img_base64 = img_base64_el.getAttribute("src");--%>
<%--		}--%>

<%--		if(lng_el.value != ""){--%>
<%--			send_data.position = {--%>
<%--				lng: lng_el.value,--%>
<%--				lat: lat_el.value--%>
<%--			};--%>
<%--		}--%>

<%--		sessionStorage.setItem("form_data", JSON.stringify(send_data));--%>
<%--		location.href = "./confirm.html";--%>
<%--	});--%>
<%--	// 使用 Session Storage 儲存資料--%>
<%--	var recovery_data = function(){--%>

<%--		if(sessionStorage.getItem("form_data") != null){--%>
<%--			var form_data = JSON.parse(sessionStorage.getItem("form_data"));--%>
<%--			p_name_el.value = form_data.p_name;--%>

<%--			p_count_el.value = form_data.p_count;--%>
<%--			p_count_value_el.innerHTML = form_data.p_count;--%>

<%--			lng_el.value = form_data.position.lng;--%>
<%--			lat_el.value = form_data.position.lat;--%>
<%--			preview_el.innerHTML = "<img class='preview_img'>"--%>
<%--		}--%>
<%--	}--%>

<%--</script>--%>

</body>
</html>