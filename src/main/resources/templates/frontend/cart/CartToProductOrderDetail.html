








<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>商品訂單資料新增 </title>


    <style type="text/css">

        button {
            padding: 5px;
        }
        form {
            display: table;
        }
        form div {
            display: table-row;
        }
        label, input, span, select {
            display: table-cell;
            margin: 5px;
            text-align: left;
        }
        input[type=text], input[type=password], select, textarea {
            width: 200px;
            margin: 5px;
        }
        form div div {
            display: table-cell;
        }
        .center {
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>
<body>

<div align="center">

    <form th:action="@{/frontend/productorder/insertProductOrderSuccess}" method="post"  onsubmit="return dosubmit();">
        <tbody>
        <div>
            <label>會員編號:</label>
            <input type="text" th:name="memNo"th:field="*{productOrder.member.memNo}"  onclick="hideContent('productOrder.member.memNo.errors');"><br/>
        </div>

        <div>
            <label>訂購人姓名:</label>
            <input type="text" th:name="productByrName"th:field="*{productOrder.member.memName}" onclick="hideContent('productOrder.member.memName.errors');" /><br/>
            <span  th:if="${#fields.hasErrors('productOrder.member.memName')}" th:errors="*{member.memName}" class="error" id="productByrName.errors"></span>
        </div>

        <div>
            <label>訂購人手機號碼:</label>
            <input type="text"th:name="productByrPhone" th:field="*{productOrder.member.memMob}" onclick="hideContent('productOrder.member.memMob.errors');" /><br/>
            <span  th:if="${#fields.hasErrors('productOrder.member.memMob')}" th:errors="*{productOrder.member.memMob}" class="error" id="productByrPhone.errors"></span>
        </div>

        <div>
            <label>訂購人Email:</label>
            <input type="email" th:name="productByrEmail" th:field="*{productOrder.member.memMail}" onclick="hideContent('productOrder.member.memMail.errors');" required /><br/>
            <span th:if="${#fields.hasErrors('productOrder.member.memMail')}" th:errors="*{productOrder.member.memMail}" class="error" id="productByrEmail.errors"></span>
        </div>

        <div>
            <label>收件人姓名:</label>
            <input type="text" th:field="*{productOrder.productRcvName}" onclick="hideContent('productOrder.productRcvName.errors');" /><br/>
            <span th:if="${#fields.hasErrors('productOrder.productRcvName')}" th:errors="*{productOrder.productRcvName}" class="error" id="productRcvName.errors"></span>
        </div>
        <div>
            <label>收件人手機號碼:</label>
            <input type="text" th:field="*{productOrder.productRcvPhone}" onclick="hideContent('productOrder.productRcvPhone.errors');" /><br/>
            <span th:if="${#fields.hasErrors('productOrder.productRcvPhone')}" th:errors="*{productOrder.productRcvPhone}" class="error" id="productRcvPhone.errors"></span>
        </div>
        <div>
            <label>取貨方式:</label>
            <select th:field="*{productOrder.productTakeMethod}">
                <option th:value="1" th:text="店取" />
                <option th:value="2" th:text="宅配" />
                <option th:value="3" th:text="超商取貨" />
            </select><br/>
        </div>
        <div>
            <label>宅配住址:</label>
            <input type="text" th:field="*{productOrder.member.memAdd}" onclick="hideContent('productOrder.member.memAdd.errors');" /><br/>
            <span th:if="${#fields.hasErrors('productOrder.member.memAdd')}" th:errors="*{productOrder.member.memAdd}" class="error" id="productAddr.errors"></span>
        </div>
        <div>
            <label>付款方式:</label>
            <select th:field="*{productOrder.productPayMethod}">
                <option th:value="1" th:text="綠界" />
                <option th:value="2" th:text="現場付款" />
            </select><br/>
        </div>
        <div>
            <label>訂單總金額:</label>
            <input type="text" th:name="productAllPrice" th:field="*{productOrder.productAllPrice}" onclick="hideContent('productOrder.productAllPrice.errors');" /><br/>
            <span th:if="${#fields.hasErrors('productOrder.productAllPrice')}" th:errors="*{productOrder.productAllPrice}" class="error" id="productAllPrice.errors"></span>
        </div>
        <div>
            <label>優惠券編號:</label>
            <input type="text"  th:field="*{productOrder.coupon.coupNo}" onclick="hideContent('productOrder.coupon.coupNo.errors');"  /><br/>
            <span th:if="${#fields.hasErrors('productOrder.coupon.coupNo')}" th:errors="*{productOrder.coupon.coupNo}" class="error" id="coupon.coupNo.errors"></span>
        </div>

        <div>
            <label>優惠券折價總和:</label>
            <input type="text" th:field="*{productOrder.productDisc}" onclick="hideContent('productOrder.productDisc.errors');" /><br/>
            <span th:if="${#fields.hasErrors('productOrder.productDisc')}" th:errors="*{productOrder.productDisc}" class="error" id="productDisc.errors"></span>
        </div>
        <div>
            <label>訂單實付金額:</label>
            <input type="text" th:name="productOrder.productRealPrice" th:field="*{productOrder.productRealPrice}" onclick="hideContent('productOrder.productRealPrice.errors');" /><br/>
            <span th:if="${#fields.hasErrors('productOrder.productRealPrice')}" th:errors="*{productOrder.productRealPrice}" class="error" id="productRealPrice.errors"></span>
        </div>
<!--        <div>-->
<!--            <label>下單時間:</label>-->
<!--            <input type="text" th:field="*{productOrdTime}" onclick="hideContent('productOrdTime.errors');" /><br/>-->
<!--            <span th:if="${#fields.hasErrors('productOrdTime')}" th:errors="*{productOrdTime}" class="error" id="productOrdTime.errors"></span>-->
<!--        </div>-->


        </tbody>




<table id="example" class="display" style="width: 100%">
    <thead >
    <tr style="background-color:#CCCCFF">
<!--        <th>商品訂單編號</th>-->
        <th>商品編號</th>
        <th>商品單價</th>
        <th>購買數量</th>
        <th>訂單實付金額</th>
        <!--        <th>評價內容</th>-->
        <!--        <th>評價星等</th>-->
        <!--        <th>修改</th>-->

    </tr>
    </thead>

    <tbody>
    <th:block th:each="productOrderDetail : ${productOrder.ProductOrderDetails}">
        <tr>
<!--            <td th:text="${productOrderDetail.compositeKey.productOrdNo}"></td>-->
            <td th:text="${productOrderDetail.compositeKey.productNo}"></td>
            <td th:name="productOrderDetail.productPrice" th:text="${productOrderDetail.productPrice}"></td>
            <td th:name="productOrderDetail.productOrdQty" th:text="${productOrderDetail.productOrdQty}"></td>
            <td  th:name="productOrderDetail.productRealPrice" th:text="${productOrderDetail.productRealPrice}"></td>
        </tr>
    </th:block>
    </tbody>
</table>
<button type="submit" class="btn btn-primary" id="submit">
    <input type="hidden" name="memNo" th:value="${productOrder.member.memNo}" />
    確定購買
</button>
    </form>


<!--    <tbody>-->
<!--    <th:block th:each="productOrder : ${productOrder}">-->
<!--        <tr>-->
<!--&lt;!&ndash;            <td th:text="${productOrderDetail.compositeKey.productOrdNo}"></td>&ndash;&gt;-->
<!--&lt;!&ndash;            <td th:text="${productOrderDetail.compositeKey.productNo}"></td>&ndash;&gt;-->
<!--            <td th:text="${productOrderDetail.productPrice}"></td>-->
<!--            <td th:text="${productOrderDetail.productOrdQty}"></td>-->
<!--            <td th:text="${productOrderDetail.productRealPrice}"></td>-->
<!--            <td th:text="${productOrderDetail.productComContent}"></td>-->
<!--            <td th:text="${productOrderDetail.productScore}"></td>-->
<!--            <td>-->
<!--                <form method="post" th:action="@{/backend/productorderdetail/getOne_For_Update}" style="margin-bottom: 0px;">-->
<!--                    <input type="submit" value="修改">-->
<!--                    <input type="hidden" name="productOrdNo" th:value="${productOrderDetail.compositeKey.productOrdNo}">-->
<!--                    <input type="hidden" name="productNo" th:value="${productOrderDetail.compositeKey.productNo}"></form>-->
<!--            </td>-->
<!--        </tr>-->
<!--    </th:block>-->
<!--    </tbody>-->

<!-- JavaScript part -->
<!--<script type="text/javascript">-->
<!--    //清除提示信息-->
<!--    function hideContent(d) {-->
<!--        document.getElementById(d).style.display = "none";-->
<!--    }-->

<!--    //照片上傳-預覽用-->
<!--    var filereader_support = typeof FileReader != 'undefined';-->
<!--    if (!filereader_support) {-->
<!--        alert("No FileReader support");-->
<!--    }-->
<!--    acceptedTypes = {-->
<!--        'image/png' : true,-->
<!--        'image/jpeg' : true,-->
<!--        'image/gif' : true-->
<!--    };-->
<!--    function previewImage() {-->
<!--        var upfile1 = document.getElementById("upFiles");-->
<!--        upfile1.addEventListener("change", function(event) {-->
<!--            var files = event.target.files || event.dataTransfer.files;-->
<!--            for (var i = 0; i < files.length; i++) {-->
<!--                previewfile(files[i])-->
<!--            }-->
<!--        }, false);-->
<!--    }-->
<!--    function previewfile(file) {-->
<!--        if (filereader_support === true && acceptedTypes[file.type] === true) {-->
<!--            var reader = new FileReader();-->
<!--            reader.onload = function(event) {-->
<!--                var image = new Image();-->
<!--                image.src = event.target.result;-->
<!--                image.width = 100;-->
<!--                image.height = 75;-->
<!--                image.border = 2;-->
<!--                if (blob_holder.hasChildNodes()) {-->
<!--                    blob_holder.removeChild(blob_holder.childNodes[0]);-->
<!--                }-->
<!--                blob_holder.appendChild(image);-->
<!--            };-->
<!--            reader.readAsDataURL(file);-->
<!--            document.getElementById('submit').disabled = false;-->
<!--        } else {-->
<!--            blob_holder.innerHTML = "<div  style='text-align: left;'>" + "● filename: " + file.name-->
<!--                + "<br>" + "● ContentTyp: " + file.type-->
<!--                + "<br>" + "● size: " + file.size + "bytes"-->
<!--                + "<br>" + "● 上傳ContentType限制: <b> <font color=red>image/png、image/jpeg、image/gif </font></b></div>";-->
<!--            document.getElementById('submit').disabled = true;-->
<!--        }-->
<!--    }-->
<!--</script>-->
<script th:inline="javascript">

    // $(function() {
    //
    //     fetch('/backend/productorder/getFromCart?memNo=?')  // 發出 GET 請求
    //         .then(response => response.json())  // 解析 JSON  這邊等於.then(function(response) {return response.json();})
    //         .then(data => { // 這邊等於 .then(function(data) {...})
    //             const table = $('#dataTable').DataTable();  // 初始化 DataTable
    //             for (const key in data) { //
    //                 const item = data[key]; // item = 包含每一個商品的詳細資訊的物件
    //                 table.row.add([  // 添加行到 DataTable
    //                     item['rentalNo'],
    //                     item['rentalCatNo'],
    //                     item['rentalName'],
    //                     item['rentalPrice'],
    //                     item['rentalSize'],
    //                     item['rentalColor'],
    //                     item['rentalInfo'],
    //                     item['rentalStat'],
    //                     '<button class="btn btn-sm btn-primary"><i class="fa-solid fa-plus"></i></button>' +
    //                     ' <button class="btn btn-sm btn-danger"><i class="fa-solid fa-minus"></i></button>'
    //                 ]).draw(false);  // 繪製表格，但不重設分頁
    //             }
    //         })
    //         .catch(error => console.error('Error loading cart data:', error));
    //
    // });

    // var isCommitted = false;//表单是否已经提交标识，默认为false
    // function dosubmit(){
    //     if(isCommitted==false){
    //         isCommitted = true;//提交表单后，将表单是否已经提交标识设置为true
    //         return true;//返回true让表单正常提交
    //     }else{
    //         return false;//返回false那么表单将不提交
    //     }
    // }

</script>

</body>
</html>